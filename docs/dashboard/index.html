<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">

<head>

  <title>blokz/profile powered by HIVE</title>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-pink.min.css" />
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@hiveio/hive-js/dist/hive.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hivesigner"></script>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>


<link rel="shortcut icon" href="../favicon.png"/>
<link rel="stylesheet" href="../css/styles.css?ver=1.01">
<script src="../js/blokz.js?ver=1.02"></script>

</head>

<body>

  Logged in as: <span id="loggedinas"></span>
<script src="https://cdn.jsdelivr.net/npm/hivesigner"></script>
<script>

    var client = new hivesigner.Client({
        app: 'blokz',
        callbackURL: 'http://127.0.0.1:3000/dashboard/',
        scope: ['vote', 'comment', 'comment_options'],
    });


    let params = (new URL(location)).searchParams;
    const token = params.get('access_token') || localStorage.getItem('sc_token');
    if (token) {
        const self = this;
        this.isInit = false;
        client.setAccessToken(token);

        client.me(function (err, result) {
            if (result) self.username = result.name;
            if (err) self.error = err;
            localStorage.setItem('sc_token', token);
            self.isInit = true;
            console.log(err, result);
            document.getElementById("loggedinas").innerHTML = result.name;
        });
    } else {
        this.isInit = true;
    }


    //     
</script>
  <span style="padding-left: 10px; float: left">
  <button id="blokztop"  class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab">
    <i class="material-icons" onclick="javascript:location.href='#'">keyboard_arrow_up</i>
  </button>
</span>

<!-- show menu button -->
<button id="blokzmenu" onclick="blokzmenu()" class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored">
  <img src="../favicon.png">
</button>

</body>

</html>